<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>
<style>
    #modalContainer {

        /* position: absolute; */
        z-index: 2;
        background: lightgrey;
        padding: 25px;
        text-align: center;
        /* left: 10%; */
        top: 25%;
        box-shadow: 0px 3px 20px 0px black;
    }

    #photoElement {
        visibility: hidden;
        height: inherit;
        width: inherit;
        transition: visibility 0s, opacity 0.5s linear;
    }

    #contentDump {
        visibility: hidden;
        transition: visibility 0s, opacity 0.5s linear;
    }

    .mainPage {
        visibility: hidden;
        transition: visibility 0s, opacity 0.5s linear;
    }
</style>

<body>

    <nav>
        <div class="nav-wrapper amber darken-1">
            <i class="large material-icons left">insert_chart</i>
            </a>
            <a href="#" class="brand-logo center">Vyber</a>
            <ul class="right hide-on-med-and-down">
                <li>
                    <a href="#">
                        <i class="material-icons left">insert_chart</i>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="material-icons left">record_voice_over</i>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="material-icons left">photo_camera</i>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <br>
    <!-- modal container -->
    <div class="container amber darken-1" id="modalContainer">
        <div class="row" style="color:white">
            <div class="col s4">

            </div>
            <div class="col s4">

                <input type="text" id="photoLink" placeholder="please enter in the url of an image">
                <a class="waves-effect waves-light btn-large grey lighten-1" id="modalButton">
                    <i class="material-icons right">send</i>Submit</a>
            </div>
            <div class="col s4">

            </div>
        </div>
    </div>

    <!-- main site container -->
    <div class="container mainPage">
        <div class="row">
            <div class="col xl12">

            </div>
        </div>
        <div class="row">
            <div class="col s8 l6" id="imageDump">
                <img src="" id="photoElement">
            </div>
            <div class="col s4 l6" id="contentDump">
                <ul class="collapsible popout">
                    <li id="ageList">
                        <div class="collapsible-header">
                            <i class="material-icons">
                                calendar_today</i>
                            Age
                        </div>
                    </li>
                    <li id="beautyList">
                        <div class="collapsible-header">
                            <i class="material-icons">local_florist</i>
                            Beauty
                        </div>
                    </li>
                    <li id="emotionList">
                        <div class="collapsible-header">
                            <i class="material-icons">insert_emoticon</i>
                            Emotion
                        </div>
                    </li>
                    <li id="faceQualityList">
                        <div class="collapsible-header">
                            <i class="material-icons">high_quality</i>
                            Face Quality
                        </div>
                    </li>
                    <li id="genderList">
                        <div class="collapsible-header">
                            <i class="material-icons">directions_run</i>
                            Gender
                        </div>
                    </li>
                    <li id="skinStatusList">
                        <div class="collapsible-header">
                            <i class="material-icons">
                                layers_clear</i>
                            Skin Status
                        </div>
                    </li>
                    <li id="smileList">
                        <div class="collapsible-header">
                            <i class="material-icons">brightness_5</i>
                            Smile
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

</body>
<script>
    $(document).ready(function () {
        $('.collapsible').collapsible();
        var photoLink;
        $("#modalButton").on("click", (event) => {
            photoLink = ($("#photoLink").val().trim());
            $("#modalContainer").css("visibility", "hidden");
            runPostFunction();
        })

        function runPostFunction() {
            $(".mainPage").css("visibility", "visible")
            $.post(
                'https://api-us.faceplusplus.com/facepp/v3/detect?api_key=28GCWA3CC2Cha_cEslK-nGp7O4MkEeAW&api_secret=45j6-poXO9N1XKLORfqQ-RNujaAjKjPu&image_url=' +
                photoLink +
                '&return_attributes=gender,age,smiling,headpose,facequality,blur,eyestatus,emotion,ethnicity,beauty,mouthstatus,eyegaze,skinstatus',
                (req, res, params) => {


                    var age = $("<div>");
                    age.html("<div> Age: " + req.faces[0].attributes.age.value + "</div>");
                    age.addClass("collapsible-body");
                    $("#ageList").append(age);


                    var beauty = $("<div>");
                    beauty.html("<div> Female Beauty: " + req.faces[0].attributes.beauty.female_score +
                        "</div>" + "<div> Male beauty: " + req.faces[
                            0].attributes.beauty
                        .male_score + "</div>");
                    beauty.addClass("collapsible-body");
                    $("#beautyList").append(beauty);



                    var emotion = $("<div>");
                    emotion.html("<div> Anger : " + req.faces[0].attributes.emotion.anger + "</div>" +
                        "<div> Disgust : " + req.faces[
                            0].attributes
                        .emotion.disgust + "</div>" +
                        "<div> Fear : " + req.faces[0].attributes.emotion.fear + "</div>" +
                        "<div> Happiness : " + req.faces[
                            0]
                        .attributes.emotion
                        .happiness + "</div>" +
                        "<div>  Neutral : " + req.faces[0].attributes.emotion.neutral + "</div>" +
                        "<div> Sadness : " +
                        req.faces[
                            0].attributes
                        .emotion.sadness + "</div>" +
                        "<div>  Surprise : " + req.faces[0].attributes.emotion.surprise + "</div>");
                    emotion.addClass("collapsible-body");
                    $("#emotionList").append(emotion);



                    var faceQuality = $("<div>");
                    faceQuality.html("<div> Threshold : " + req.faces[0].attributes.facequality.threshold +
                        "</div>" +
                        "<div> Value: " + req.faces[
                            0].attributes.facequality.value + "</div>");
                    faceQuality.addClass("collapsible-body");
                    $("#faceQualityList").append(faceQuality);



                    var gender = $("<div>");
                    gender.html("<div> Gender : " + req.faces[0].attributes.gender.value + "</div>");
                    gender.addClass("collapsible-body");
                    $("#genderList").append(gender);



                    var skinStatus = $("<div>");
                    skinStatus.html("<div> Acne : " + req.faces[0].attributes.skinstatus.acne + "</div>" +
                        "<div> Dark Circles : " + req.faces[0].attributes
                        .skinstatus.dark_circle + "</div>" +
                        "<div> Health : " + req.faces[0].attributes.skinstatus.health + "</div>" +
                        "<div> Stain : " + req.faces[
                            0]
                        .attributes.skinstatus
                        .stain + "</div>");
                    skinStatus.addClass("collapsible-body")
                    $("#skinStatusList").append(skinStatus)



                    var smile = $("<div>");
                    smile.html("<div> Threshold : " + req.faces[0].attributes.smile.threshold + "</div>" +
                        "<div> Value: " +
                        req.faces[0].attributes
                        .smile
                        .value + "</div>");
                    smile.addClass("collapsible-body");
                    $("#smileList").append(smile);

                    $("#photoElement").attr("src", photoLink)
                    $("#photoElement").css("visibility", "visible")
                    $("#contentDump").css("visibility", "visible")



                    console.log(params);
                })
        }

    });
</script>

</html>